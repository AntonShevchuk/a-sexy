/**
 * jQuery (a)Sexy images plugin
 *
 * Copyright (c) 2009 Anton Shevchuk
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * @author 	Anton Shevchuk AntonShevchuk@gmail.com
 * @version 0.0.1
 */
;(function($){defaults={width:320,height:240,left:0,top:0,zoom:true,speed:500,opacity:0.8,round:60,func:"linear"};$.fn.asexy=function(n){var o=this;this.options=$.extend({},defaults,n);this.each(function(){if($.browser.msie){$(this).attr('src',$(this).attr('src')+'?random='+(new Date()).getTime())}$(this).load(function(){var a=$(this);var b=a.wrap('<div class="asexy"></div>').parent();var c=a.width();var d=a.height();if(o.options.zoom){var e=o.options.width/a.width();var f=o.options.height/a.height();var g=(e>f)?e:f;c=g*c;d=g*d;a.width(c);a.height(d)}var h={width:o.options.width,height:o.options.height,position:'relative',overflow:'hidden'};var j=['margin-top','margin-right','margin-bottom','margin-left','padding-top','padding-right','padding-bottom','padding-left','border-top-width','border-right-width','border-bottom-width','border-left-width','border-top-color','border-right-color','border-bottom-color','border-left-color','border-top-style','border-right-style','border-bottom-style','border-left-style','z-index','float','clear','cursor'];var k=j.length;for(var i=0;i<k;i++)h[j[i]]=a.css(j[i]);var l=o.options.left;var m=o.options.top;if(l=='center'){l=-((c/2)-(o.options.width/2))}if(m=='center'){m=-((d/2)-(o.options.height/2))}a.css({top:m,left:l,padding:0,margin:0,border:0,position:'absolute',opacity:o.options.opacity});b.css(h).data('asexy',{img:{width:c,height:d},div:{width:o.options.width,height:o.options.height},def:{top:m,left:l},diff:{width:Math.round(c-o.options.width),height:Math.round(d-o.options.height)}});b.hover(function(){o.go(this)},function(){o.back(this)})});return this});this.go=function(a){$(a).find('img').fadeTo(o.options.speed/2,1);switch(o.options.func){case'x':o.go.x(a);break;case'vertical':o.go.vertical(a);break;case'horizontal':o.go.horizontal(a);break;case'zigzag':o.go.zigzag(a);break;case'linear':default:o.go.linear(a);break}};this.go.linear=function(a){var b=$(a);var c=b.find('img');var d=b.data('asexy');var e=c.css('left');var f=c.css('top');var g=Math.ceil(d.img.height/d.div.height);g=(g>1)?g:2;var h=o.options.speed;for(i=1;i<g;i++){var j=i*d.div.height;if(d.diff.width){if(i%2==0){c.animate({left:0},h)}else{c.animate({left:-d.diff.width},h)}}if((d.diff.height+d.div.height-j)<o.options.round){break}if(d.diff.height){if(j>d.diff.height){vspeed=d.div.height/h*2*(j-d.diff.height);j=d.diff.height}else{vspeed=h}c.animate({top:-j},vspeed)}}};this.go.zigzag=function(a){var b=$(a);var c=b.find('img');var d=b.data('asexy');var e=c.css('left');var f=c.css('top');var g=Math.ceil(d.img.height/d.div.height);g=(g>1)?g:2;var h=o.options.speed;for(i=1;i<=g;i++){var j=i*d.div.height;if(d.diff.width){c.animate({left:-d.diff.width},h)}if((d.diff.height+d.div.height-j)<o.options.round){break}if(d.diff.height){if(j>d.diff.height){j=d.diff.height}if(i!=g){c.animate({top:-j,left:0},h)}}}};this.go.horizontal=function(a){var b=$(a);var c=b.find('img');var d=b.data('asexy');var e=c.css('left');var f=c.css('top');var g=o.options.speed;c.animate({left:-d.diff.width},g).animate({left:0,},g)};this.go.vertical=function(a){var b=$(a);var c=b.find('img');var d=b.data('asexy');var e=c.css('left');var f=c.css('top');var g=o.options.speed;c.animate({top:-d.diff.height},g).animate({top:0,},g)};this.go.x=function(a){var b=$(a);var c=b.find('img');var d=b.data('asexy');var e=c.css('left');var f=c.css('top');var g=o.options.speed;c.animate({left:-d.diff.width,top:-d.diff.height},g).animate({left:-d.diff.width,top:0},g).animate({left:0,top:-d.diff.height},g).animate({left:0,top:0},g)};this.back=function(a){var b=$(a);var c=b.find('img');var d=b.data('asexy');c.stop(true);c.animate({top:d.def.top,left:d.def.left},o.options.speed).fadeTo(o.options.speed/2,o.options.opacity)};return this}})(jQuery);